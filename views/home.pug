extends layout

block content
    script(src="/js/middleman.js")
    script.
        //var herokuAPI = "https://!{heroku_app}.herokuapp.com/api";
        var herokuAPI = "http://localhost:3000/api";
        var heroku = "!{heroku_app}";
    if lucky
        include lucky-overlay
    if admin
        if masquerade
            a(href='/home?login_success=1') Back to Home
        else
            //
            form.form-inline(action='')
                select.form-control(name='masquerade')
                    each val in students
                        option(value=val.id)=val.sortable_name
                input(type='hidden', name='login_success', value='1')
                input.form-control.btn.btn-secondary(type='submit' value='Masquerade as Student')
    .onexys_styling.o_hompage
        .left(style='width: 360px; margin-top: -10px;')
            #points.standard_box.left
                h2 My Points
                p#point_count=score
                #flag.blue
                    a#dailyTaskLink(title="Open Daily Task" target="_blank")
                        img#dailyTaskImg
                //
                    if daily_task.id == null
                        a(title='Open Daily Task', href='https://'+heroku_app+'.herokuapp.com/404', target='_blank')
                            img#dailyTaskImg
                    else
                        if daily_task.id == -1
                            // An assignment matching the Daily Task criteria is valid and does exist, but it is has not opened for students yet.
                            a(title='Open Daily Task', href='https://'+heroku_app+'.herokuapp.com/not-open', target='_blank')
                                img#dailyTaskImg
                        else
                            // 
                            a(title='Open Daily Task', href=canvasURL+'/courses/'+courseID+'/assignments/'+daily_task.id, target='_blank')
                                img#dailyTaskImg
            .standard_home_box.left
                h2 Leaderboard
                table
                    thead
                        tr
                            th Place
                            th Team
                            th Score
                    tbody#leaderboard
                    tbody#myTeam
                        tr.leader_me
                            td
                                #myteam_head MY TEAM
                            td=my_team.Name
                            td=my_team.Score
            #recent_badges.standard_home_box.left(style='width: 313px; height: 180px;')
                h2 Recent Badges
                each badge in awarded_badges
                    #recent_badge1.badge_container.completed(style='margin-left: 1px; margin-right: 10px; margin-bottom: 20px; width: 80px; height: 90px;')
                        .badge_portrait(style='width: 80px; height: 100px; background-image: url(https://'+heroku_app+'.herokuapp.com/images/badgePics/'+badge.EarnedHoverURL+')')
                        .badge_portrait.front_portrait(style='width: 80px; height: 100px; background-image: url(https://'+heroku_app+'.herokuapp.com/images/badgePics/'+badge.EarnedURL+')')
                br
                p#badges_link_sentence
                    a(id='', title='info_Badges', href="https://" + heroku_app + ".herokuapp.com/badges", target='_blank') Click here to see all your badges.
            #progress.standard_home_box.left(style='width: 324px;')
                h2 My Progress So Far
                a#pretest.progress_box.single_line.completed(style='width: 187.5px !important;')  Pre-Test
                #progress_labels(style='margin-left: 15px !important;')
                    p Pract.
                    p Apply
                br
                #modules
                a#posttest.progress_box.single_line(style='width: 187.5px !important;' title="The Post Test is not ready yet. Complete all Practices and Applications, then check back!") Post-Test
        .left(style='width: 500px !important; margin-top: -10px;')
            br
            #updates.standard_home_box.left(style='width: 450px !important; margin-top: 23px !important;')
            #featured.standard_home_box.left(style='width: 458px !important;')
                h2#LoG_title Loading Videos...
                p
                    a#LoG_link(href="#" target='_blank')
                #homepageVideos
